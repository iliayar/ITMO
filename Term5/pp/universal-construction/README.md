# Универсальная Конструкция

В рамках данного задания необходимо с помощью универсальной lock-free конструкции 
реализовать счетчик с атомарной операцией инкремента на основе объекта консенсуса. 

## Задание

В файле [`src/AtomicCounter.kt`](src/AtomicCounter.kt) 
находится описание интерфейса счетчика, который вам предстоит реализовать. 
Вам надо реализовать всего одну операцию:

```kotlin
fun getAndAdd(x: Int): Int
```

В вашем распоряжении есть класс [`Consensus<T>`](src/Consensus.kt), который реализует консенсус на объекте 
любого типа `T` предоставляя единственную операцию:

```kotlin
fun decide(value: T): T
```

Ваше решение должно быть в файле `src/Solution.(kt|java)`. Основной класс должен называться `Solution`.
Шаблоны решений вы найдете здесь: 
* На языке Kotlin в файле [`src/SolutionTemplateKt.kt`](src/SolutionTemplateKt.kt) 
* На языке Java в файле [`src/SolutionTemplateJava.java`](src/SolutionTemplateJava.java)

**В заголовке файла, в строке `@author` впишите вашу фамилию и имя**.
В классе решения вы можете использовать объекты типа `Consensus` для синхронизации потоков, объекты 
типа `ThreadLocal` для хранения состояния внутри потока, и значения типа `Int`. 
Все поля класса должны быть неизменяемые (`val` в Kotlin, `final` в Java).
Массивы использовать нельзя. Для lock-free универсальной конструкции они не нужны.
Также вам наверняка потребуется вспомогательный класс, на который вы можете ссылаться, и на который накладываются 
такие же ограничения. Вспомогательные классы должны быть внутри вашего класса решения. 

Для проверки вашего решения запустите из корня репозитория:
* `./gradlew build` на Linux или MacOS
* `gradlew build` на Windows
 
Тесты:
* [`CorrectnessTest`](test/CorrectnessTest.kt) проверяет последовательную спецификацию и выполнение ограничений 
  описанных в условии. 
* [`LinearizabilityTest`](test/LinearizabilityTest.kt) проверяет линеаризуемость вашего решения. 
* [`LockFreedomTest`](test/LockFreedomTest.kt) проверяет что в вашем решении не используются блокировки.

## Формат сдачи

Выполняйте задание в этом репозитории. Инструкции по сдаче заданий находятся в 
[этом документе](https://docs.google.com/document/d/1GQ0OI_OBkj4kyOvhgRXfacbTI9huF4XJDMOct0Lh5og). 
