#+title: Lab 3

#+begin_src jupyter-julia
include("main.jl") 
#+end_src

#+RESULTS:
: # Out[104]:
: : get_roc_data (generic function with 1 method)

* Loading libraries
#+begin_src jupyter-julia
using Plots 
#+end_src

#+RESULTS:
: # Out[6]:

* Finding Best
| n |                    α |              score |
|---+----------------------+--------------------|
| 1 | 0.010000000000000004 | 0.9668647262759154 |
| 2 | 0.010000000000000004 | 0.9292875025473102 |
| 3 | 0.010000000000000004 |  0.881818929028938 |
| 1 | 0.018016482306544113 | 0.9650090267203624 |
| 2 | 0.018016482306544113 | 0.9255218800746251 |
| 3 | 0.018016482306544113 | 0.8769288041843011 |
| 1 |  0.03245936347020171 | 0.9640892868840188 |
| 2 |  0.03245936347020171 | 0.9150374509377979 |
| 3 |  0.03245936347020171 | 0.8690638458603968 |
| 1 |  0.05848035476425734 | 0.9640791902638428 |
| 2 |  0.05848035476425734 | 0.9082886509354205 |
| 3 |  0.05848035476425734 |  0.856853734743568 |
| 1 |  0.10536102768906651 | 0.9566170752920486 |
| 2 |  0.10536102768906651 | 0.8996002870224693 |
| 3 |  0.10536102768906651 | 0.8311240666400856 |
| 1 |  0.18982350911593704 | 0.9519527031896375 |
| 2 |  0.18982350911593704 | 0.8809094759994188 |
| 3 |  0.18982350911593704 | 0.8068505615803643 |
| 1 |  0.34199518933533946 | 0.9482111193373741 |
| 2 |  0.34199518933533946 | 0.8571001243308274 |
| 3 |  0.34199518933533946 | 0.7689436301556075 |
| 1 |   0.6161550277583346 | 0.9350149790549788 |
| 2 |   0.6161550277583346 | 0.8158296159872667 |
| 3 |   0.6161550277583346 | 0.6883774671243913 |
| 1 |    1.110094615569623 | 0.9141256331531464 |
| 2 |    1.110094615569623 |    0.7528121432854 |
| 3 |    1.110094615569623 | 0.6389473031248818 |
| 1 |                  2.0 | 0.8712264301476054 |
| 2 |                  2.0 | 0.6893248864397052 |
| 3 |                  2.0 | 0.5653454401544946 |
Best: =0.9668647262759154=
Params: =(1, 0.010000000000000004)=


Subj weight: =0.6842105263157895=
Score: =0.9770192017936647=

|             score |  λ_legit |
|-------------------+----------|
|              -Inf |      1.0 |
|              -Inf |     10.0 |
|              -Inf |    100.0 |
|              -Inf |   1000.0 |
|              -Inf |  10000.0 |
|              -Inf | 100000.0 |
|              -Inf |    1.0e6 |
|              -Inf |    1.0e7 |
|              -Inf |    1.0e8 |
| 0.843119266055046 |    1.0e9 |

Best:	0.843119266055046
Params:	1.0e9

* Loading dataset
#+begin_src jupyter-julia
n, α = (1, 0.010000000000000004)
ratio = 0.6842105263157895
λ_legit = 1.0e9
#+end_src

#+RESULTS:
: # Out[15]:
: : 1.0e9

#+begin_src jupyter-julia
ds = build_ngramm_datasets(read_data("data"); N=n, N_SUBJ=n)
#+end_src

#+RESULTS:
#+begin_example
# Out[4]:
,#+BEGIN_EXAMPLE
  10-element Vector{Dataset{Vector{Int64}}}:
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[14486]], [[14486], [80], [196], [64], [1896], [8962], [14328], [2130], [16502], [9211]  …  [18948], [196], [1591], [16085], [14338], [19054], [10248], [84], [118], [70]]), :spam, "data/part1/11003spmsg97.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[12091], [16398], [21903], [1408], [62], [2547], [10546], [3295], [2410]], [[86], [86], [86], [86], [86], [86], [86], [86], [86], [86]  …  [1967], [16502], [4567], [13472], [20131], [1835], [13017], [11676], [13520], [84]]), :spam, "data/part1/11006spmsg75.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [4053], [47]], [[19071], [80], [2176], [13472], [9669], [180], [22481], [6308], [61], [4053]  …  [86], [21054], [86], [12373], [86], [4339], [14430], [84], [17171], [84]]), :spam, "data/part1/1101spmsg96.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1692], [17345], [10936], [2130], [9131], [14544], [2008], [14471], [22160], [131], [131], [131], [131], [131], [131]], [[16735], [16721], [2843], [1835], [16857], [76], [76], [76], [76], [76]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :spam, "data/part1/1102spmsg63.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[23340], [1967], [12372], [1967], [130], [23172], [9887]], [[19054], [7634], [1847], [2130], [6049], [130], [9887], [2130], [20010], [118]  …  [2130], [23172], [84], [23266], [24097], [80], [16502], [20010], [10092], [9561]]), :legal, "data/part1/11037legit16.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [10911]], [[4533], [4407], [1967], [14875], [118], [1781], [1847], [6485], [1835], [92]  …  [118], [4407], [132], [1248], [84], [22301], [84], [3993], [84], [13830]]), :legal, "data/part1/11042legit26.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19071]], [[284], [14851], [80], [17345], [14373], [17891], [1901], [18783], [17969], [2130]  …  [125], [125], [125], [125], [125], [125], [125], [125], [125], [125]]), :legal, "data/part1/1104legit55.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[130], [4053], [6592], [84]], [[284], [716], [80], [82], [82], [82], [82], [82], [82], [82]  …  [332], [84], [16147], [17345], [13406], [14462], [15940], [2410], [18096], [11954]]), :spam, "data/part1/1104spmsg86.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[12243], [15462], [47], [47], [47]], [[15964], [22301], [1363], [16502], [23259], [20526], [15287], [1594], [1967], [19410]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :spam, "data/part1/11073spmsg79.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[9450]], [[6306], [118], [86], [86], [17212], [84], [20434], [84], [13830], [86], [13785], [84], [14758], [204], [84]]), :legal, "data/part1/11074legit27.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[14686], [709], [1850], [19801], [131]], [[19071], [12296], [80], [1970], [10565], [1847], [23757], [19278], [84], [1835]  …  [47], [47], [47], [24087], [3590], [80], [2116], [21070], [80], [1829]]), :spam, "data/part1/1895spmsg106.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[15527], [10607]], [[19071], [12684], [8962], [180], [7253], [80], [4862], [13406], [13328], [80]  …  [18879], [5602], [80], [18879], [4056], [80], [24308], [7840], [80], [2146]]), :legal, "data/part1/1915legit33.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2176], [9131], [17345], [23511], [19054], [80], [2101], [84], [84], [84], [84]], [[4822], [80], [19054], [21292], [1847], [20908], [5702], [18844], [80], [13406]  …  [92], [17116], [2176], [13522], [23674], [148], [18844], [14338], [4862], [84]]), :spam, "data/part1/1926spmsg88.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [3444], [80], [20344]], [[5783], [12694], [17430], [18957], [10373], [1967], [3444], [319], [12547], [14338]  …  [84], [2146], [86], [5762], [86], [739], [86], [1359], [84], [14758]]), :legal, "data/part1/1941legit15.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[4053], [2845], [14221]], [[16502], [20695], [1835], [23422], [19144], [47], [47], [47], [21835], [15527]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :spam, "data/part1/1945spmsg76.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [11852], [18094], [68], [11521], [70]], [[196], [64], [209], [21357], [22562], [15700], [2130], [22933], [80], [13406]  …  [22301], [5603], [80], [14735], [82], [10898], [1465], [5729], [80], [23121]]), :legal, "data/part1/1949legit7.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [22301], [5603], [15382], [1835], [15631]], [[22301], [5603], [1835], [24589], [3885], [118], [8625], [10373], [4177], [6135]  …  [84], [1570], [84], [2146], [15756], [24724], [103], [20439], [12118], [84]]), :legal, "data/part1/1980legit58.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13651], [118], [10879], [1991], [24211], [2766], [8236]], [[68], [16474], [14338], [3312], [70], [23681], [14338], [1359], [10879], [1991]  …  [80], [7064], [7911], [20272], [118], [6385], [14340], [80], [4183], [650]]), :legal, "data/part1/1987legit44.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[5573], [47]], [[3677], [22660], [15981], [9594], [5573], [2130], [16502], [22064], [15981], [9594]  …  [84], [1672], [84], [7423], [84], [14000], [86], [17157], [86], [16410]]), :legal, "data/part1/1988legit13.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14328], [15966], [1967], [307], [2547], [47], [82], [20419]], [[127], [284], [11287], [4538], [80], [127], [127], [196], [4625], [18034]  …  [130], [20588], [127], [127], [14517], [24477], [5496], [127], [12548], [16737]]), :spam, "data/part1/1997spmsg91.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [22577], [20908], [14616]], [[284], [14851], [80], [16147], [17345], [14338], [130], [19410], [47], [5899]  …  [17212], [84], [14735], [84], [1465], [84], [1792], [86], [253], [21855]]), :legal, "data/part10/100legit29.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [14140], [84], [13147], [1613], [383], [80], [1867], [16012], [80], [20310]], [[284], [4353], [47], [17011], [15691], [9997], [18783], [1613], [1613], [93]  …  [118], [1008], [132], [14735], [84], [1465], [84], [1792], [84], [127]]), :legal, "data/part10/101002legit41.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [10542], [1359], [2268], [1822]], [[8962], [180], [2331], [1967], [4602], [24704], [196], [18464], [2130], [9622]  …  [17345], [10936], [2130], [9131], [16502], [21717], [84], [12481], [47], [8211]]), :legal, "data/part10/101006legit31.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[20259], [82], [23231], [86], [16667], [82], [9634], [86], [16667], [82], [18138]], [[7062], [118], [22880], [4177], [5762], [80], [17713], [2519], [13406], [1192]  …  [14111], [2130], [15001], [2130], [12424], [15959], [24279], [24009], [4299], [84]]), :spam, "data/part10/101011spmsg62.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[22180], [14988], [47]], [[10769], [13520], [19074], [51], [305], [51], [16263], [16296], [19054], [23422]  …  [84], [18762], [84], [13830], [86], [12133], [84], [6204], [765], [19054]]), :spam, "data/part10/101019spmsg88.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [4822], [62], [3492]], [[284], [14851], [84], [84], [2101], [11449], [2130], [4578], [4177], [17345]  …  [17345], [20824], [11870], [1835], [23235], [84], [127], [127], [14851], [127]]), :legal, "data/part10/101024legit7.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17008], [180], [4053], [20187], [2130], [12189]], [[17008], [180], [4053], [20187], [2130], [12189], [8962], [1663], [19421], [15964]  …  [8625], [765], [4784], [23982], [118], [19969], [132], [17766], [84], [13830]]), :spam, "data/part10/101035spmsg107.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17348], [23422], [16296], [47], [47], [47]], [[16502], [13521], [4756], [1967], [14677], [4558], [17348], [9610], [13476], [4177]  …  [132], [7386], [84], [13830], [2176], [13472], [16085], [14338], [13448], [9498]]), :spam, "data/part10/101035spmsg69.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[771], [82], [209], [298], [190], [82], [9568], [22328]], [[771], [17073], [298], [190], [82], [9568], [22328], [2176], [19946], [180]  …  [84], [13383], [12163], [22213], [1594], [4695], [14338], [22762], [15026], [84]]), :spam, "data/part10/101058spmsg72.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13368], [1991], [16637], [82], [21475], [68], [4274], [70]], [[1791], [80], [196], [12347], [16637], [175], [13368], [84], [2021], [4177]  …  [8088], [13368], [17212], [18247], [84], [24097], [82], [82], [82], [14745]]), :legal, "data/part10/101076legit21.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}(Vector{Int64}[], [[9804], [118], [12375], [24724], [11534], [284], [14851], [80], [12375], [24724]  …  [18497], [167], [13068], [132], [1670], [84], [16798], [84], [1792], [171]]), :legal, "data/part10/10901legit23.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13249], [118], [14328], [12836], [2130], [19630], [16502], [15516], [47], [68], [20389], [70]], [[1192], [21906], [17345], [7045], [47], [23681], [19907], [82], [4053], [23360]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [5872]]), :spam, "data/part10/10908spmsg70.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[3735], [24183], [6567], [14108], [10930], [773], [82], [9118]], [[284], [10092], [9561], [17798], [80], [2176], [5657], [9472], [2130], [19163]  …  [4520], [19054], [7634], [84], [23266], [24097], [80], [15031], [13406], [2377]]), :legal, "data/part10/1091legit34.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1791], [22641]], [[196], [16893], [18417], [22299], [788], [13993], [2130], [19666], [2130], [2101]  …  [14428], [131], [1735], [80], [1901], [47], [24430], [80], [15899], [84]]), :legal, "data/part10/10923legit13.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [1437], [13406], [22611]], [[16756], [2130], [18896], [13406], [6709], [47], [130], [1550], [21841], [20824]  …  [15458], [2008], [2807], [118], [742], [6353], [728], [6919], [19834], [14296]]), :legal, "data/part10/10927legit12.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17866], [289], [47]], [[1791], [80], [2176], [21532], [23037], [1812], [17345], [5657], [1594], [6485]  …  [2130], [1594], [408], [19666], [22299], [19969], [1835], [16502], [9804], [84]]), :spam, "data/part10/1094spmsg83.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13249], [118], [1192], [59], [16143], [1835], [16502], [11260], [938], [69], [82], [1850], [5337], [47], [47], [47]], [[76], [76], [76], [76], [76], [76], [76], [76], [76], [76]  …  [84], [15516], [22299], [19969], [1835], [16502], [9804], [2441], [84], [16756]]), :spam, "data/part10/10953spmsg102.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [4196], [9700]], [[284], [14851], [80], [1850], [1847], [13520], [1593], [22331], [18957], [16502]  …  [84], [14735], [84], [1465], [84], [1792], [86], [253], [21855], [127]]), :legal, "data/part10/10990legit55.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[3247], [15966], [21990], [51], [19011], [51], [1692], [14342], [21366], [17345], [2130], [9131], [47]], [[284], [12296], [118], [1812], [17345], [4339], [6427], [1115], [2130], [16502]  …  [59], [59], [59], [59], [59], [59], [59], [59], [59], [59]]), :spam, "data/part10/10999spmsg66.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17189]], [[61], [61], [61], [61], [61], [61], [61], [61], [61], [61]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :legal, "data/part10/109legit47.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [8], [171], [13651], [1582], [76], [4547]], [[82], [82], [82], [82], [82], [82], [82], [82], [82], [82]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part2/21001legit47.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [51], [4355], [4756], [51]], [[127], [127], [19071], [2260], [80], [127], [127], [127], [11326], [80]  …  [84], [20316], [84], [14000], [86], [253], [22225], [86], [70], [2260]]), :legal, "data/part2/21014legit15.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[3319], [9110], [632], [3699]], [[284], [13383], [80], [196], [2878], [15966], [16502], [3699], [1150], [1663]  …  [16250], [21990], [16502], [4602], [3699], [13472], [9472], [84], [15031], [9111]]), :legal, "data/part2/21023legit1.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20153], [11852]], [[284], [4353], [47], [196], [22213], [22172], [1991], [16502], [20215], [1835]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [127]]), :legal, "data/part2/2102legit44.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17345], [13522], [17008], [47], [47], [47]], [[24240], [16502], [22088], [12525], [23686], [82], [82], [82], [17345], [22521]  …  [2130], [24240], [84], [765], [22562], [4784], [80], [22562], [15700], [82]]), :spam, "data/part2/21034spmsg65.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[113], [84], [6388], [80], [13984], [118], [2016], [10879], [80], [5915], [82], [101], [80], [20259], [11054]], [[17915], [9594], [118], [19381], [82], [6388], [84], [16538], [14745], [797]  …  [82], [82], [82], [82], [17915], [9594], [118], [19381], [82], [6388]]), :legal, "data/part2/21049legit7.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14988], [14372]], [[9079], [118], [1850], [16893], [21472], [21147], [22299], [17345], [23590], [84]  …  [11599], [84], [16502], [16684], [1847], [2161], [2130], [17345], [84], [9079]]), :legal, "data/part2/21065legit56.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20048]], [[1791], [19320], [13406], [14851], [80], [196], [4339], [14903], [23323], [14385]  …  [86], [758], [82], [109], [86], [93], [84], [127], [127], [14851]]), :legal, "data/part2/21093legit4.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [14988], [2410], [1835], [9110], [19144]], [[14988], [2410], [1835], [3788], [24603], [14338], [4671], [23720], [9110], [18359]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part2/2125legit34.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [8], [171], [10879], [1835], [21671], [24247], [24247], [16098], [14186]], [[79], [79], [79], [79], [79], [79], [79], [79], [79], [79]  …  [13822], [19623], [80], [23309], [650], [1967], [19144], [80], [16502], [14510]]), :legal, "data/part2/2129legit33.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}(Vector{Int64}[], [[24717], [2130], [118], [125], [775], [24724], [118], [14369], [80], [744]  …  [125], [775], [16756], [84], [13934], [21781], [13406], [23315], [84], [20201]]), :spam, "data/part2/290spmsg97.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[93], [21691], [4053], [5159], [84]], [[16502], [23266], [23422], [22198], [18247], [1991], [16502], [17212], [80], [21243]  …  [6507], [84], [805], [84], [828], [84], [101], [86], [21809], [86]]), :spam, "data/part2/2917spmsg64.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16502], [4267], [2246], [47]], [[19054], [1847], [15527], [1613], [6306], [118], [86], [86], [20382], [84]  …  [6306], [118], [86], [86], [17212], [84], [2605], [84], [13830], [86]]), :spam, "data/part2/291spmsg67.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [21186], [14338], [15022], [1958], [1648], [20264]], [[7330], [1850], [709], [15691], [6032], [19449], [1609], [1593], [1958], [19376]  …  [86], [17212], [84], [17228], [84], [13830], [86], [23315], [80], [8180]]), :legal, "data/part2/2931legit0.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[15700], [20131], [47], [1621], [16958], [84], [101]], [[11968], [2221], [47], [15964], [20695], [62], [2096], [1847], [8962], [17225]  …  [69], [70], [9583], [20657], [2130], [118], [51], [1626], [15544], [51]]), :spam, "data/part2/2935spmsg74.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [15265], [13406], [5331]], [[1968], [7661], [3720], [82], [1968], [531], [8848], [84], [196], [16893]  …  [20042], [70], [13406], [2130], [20907], [10934], [7630], [18996], [84], [10249]]), :legal, "data/part2/2940legit20.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[18660], [23610], [11356], [15149], [68], [14766], [11090], [16252], [70], [7779]], [[76], [76], [76], [76], [76], [76], [76], [76], [76], [76]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :legal, "data/part2/2940legit25.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16811], [18411], [9024], [14338], [5915], [82], [101], [3124]], [[1368], [118], [11751], [766], [82], [16811], [18411], [9024], [23681], [14338]  …  [10629], [84], [13830], [14812], [132], [22123], [84], [9504], [84], [14000]]), :legal, "data/part2/2949legit9.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16637], [82], [13368]], [[19071], [80], [196], [19946], [16502], [16637], [82], [13368], [4177], [13368]  …  [70], [70], [70], [131], [16147], [17345], [20824], [11870], [80], [8024]]), :legal, "data/part2/2986legit51.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[51], [12796], [13406], [15631], [51], [11232], [64], [11935], [24183], [23681], [14338], [1359]], [[76], [76], [76], [76], [76], [76], [76], [76], [76], [76]  …  [2126], [14111], [118], [68], [6534], [70], [101], [6715], [6568], [18732]]), :legal, "data/part2/299legit31.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[24485], [14338], [12905], [82], [8091]], [[21735], [14338], [22627], [3788], [8584], [24485], [14338], [12905], [14943], [12116]  …  [1835], [6056], [80], [13775], [180], [10712], [10242], [1835], [6594], [84]]), :legal, "data/part3/31016legit46.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[130], [8857]], [[478], [17188], [130], [20259], [12808], [80], [196], [17054], [1812], [17345]  …  [196], [1591], [20824], [16085], [14338], [22991], [17345], [84], [125], [775]]), :spam, "data/part3/31017spmsg80.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[20428], [1835], [20255], [21767]], [[19071], [18935], [20428], [1835], [2418], [82], [7967], [3788], [8584], [16502]  …  [14935], [15262], [6382], [2261], [21759], [8371], [16786], [22273], [21821], [84]]), :legal, "data/part3/31019legit14.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [9771], [82], [205], [118], [6690], [171], [20774], [23681], [14338], [10473]], [[23681], [14338], [1284], [21761], [10473], [20744], [118], [475], [24736], [23166]  …  [118], [93], [15287], [12118], [10473], [24724], [118], [775], [8890], [12118]]), :legal, "data/part3/31019legit8.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16351], [9568], [118], [3842], [17730], [7634], [14338], [103], [69]], [[16502], [21946], [7634], [16893], [15149], [1613], [16538], [80], [115], [14745]  …  [14111], [118], [79], [862], [68], [88], [70], [95], [7619], [21026]]), :legal, "data/part3/31024legit30.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [8], [171], [16502], [7775], [16158], [14574], [1991], [8625], [4207]], [[11426], [752], [80], [12116], [284], [3658], [86], [18240], [16502], [7775]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part3/31029legit36.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20153], [11852]], [[284], [6818], [80], [284], [13383], [80], [127], [93], [84], [489]  …  [125], [125], [125], [125], [125], [125], [79], [127], [127], [127]]), :legal, "data/part3/31038legit19.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [15965]], [[1791], [14851], [80], [127], [16756], [16212], [84], [1850], [16893], [12643]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :legal, "data/part3/31057legit54.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[4053], [5652], [47], [47], [47]], [[19071], [82], [125], [775], [13067], [17345], [10936], [2130], [17730], [147]  …  [125], [19969], [17345], [4177], [15964], [9594], [17463], [23034], [47], [6282]]), :spam, "data/part3/31064spmsg93.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [7116], [80], [9110], [62], [3788]], [[14851], [80], [130], [11852], [1847], [11870], [11279], [11901], [18948], [16502]  …  [12424], [4987], [1967], [130], [22880], [84], [12481], [82], [82], [9919]]), :legal, "data/part3/3109legit40.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[16502], [13594]], [[4177], [16502], [491], [1967], [5783], [193], [84], [5820], [284], [716]  …  [2646], [18052], [13406], [23479], [424], [84], [23478], [12243], [13611], [5820]]), :spam, "data/part3/3938spmsg98.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [22301], [5228], [1835], [15631], [68], [24503], [70]], [[10829], [16325], [22301], [20083], [22301], [5228], [1835], [22627], [3788], [20507]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part3/393legit16.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2547], [3314]], [[10993], [20432], [13448], [4682], [2130], [1594], [1169], [47], [15462], [84]  …  [1967], [16502], [7634], [13472], [4625], [16282], [84], [16147], [17345], [84]]), :spam, "data/part3/3952spmsg101.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[11812], [82], [18796], [82], [3129], [84]], [[19071], [80], [526], [13406], [13886], [2170], [80], [9997], [15527], [13266]  …  [84], [19434], [84], [13830], [17933], [13266], [80], [13422], [82], [12933]]), :spam, "data/part3/3967spmsg104.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[9095], [2410]], [[284], [12296], [80], [1812], [17345], [15149], [19054], [7634], [1835], [3762]  …  [21051], [1991], [130], [17682], [2130], [6835], [22555], [47], [47], [47]]), :spam, "data/part3/3969spmsg103.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[23607], [16282], [84]], [[7990], [2693], [18111], [11532], [211], [84], [18264], [2808], [80], [1932]  …  [14342], [23998], [2130], [645], [1901], [84], [6206], [80], [4317], [20940]]), :spam, "data/part3/3977spmsg100.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14988], [118], [14988], [118], [15382], [82], [4968], [20428], [1613], [10898], [51], [1465], [51]], [[21670], [82], [82], [82], [82], [82], [82], [82], [82], [82]  …  [14735], [84], [17669], [84], [2509], [84], [1792], [249], [79], [79]]), :legal, "data/part3/3985legit43.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [13547], [5228], [1613], [10898], [51], [1465], [51]], [[284], [14851], [80], [196], [4339], [6427], [17753], [17345], [180], [7253]  …  [84], [16147], [17345], [14338], [130], [8538], [84], [24097], [14287], [7091]]), :legal, "data/part3/3987legit52.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16993], [1847], [16993], [47], [47], [47]], [[19054], [7634], [1847], [8049], [17753], [2130], [17345], [9805], [2176], [2782]  …  [1847], [15691], [3205], [2008], [2934], [22299], [12308], [16993], [709], [16993]]), :spam, "data/part3/398spmsg82.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[9048], [5897], [1835], [6963]], [[9048], [5897], [1835], [6963], [127], [4177], [16502], [491], [1967], [5783]  …  [2130], [16502], [2646], [13406], [23681], [15700], [23373], [82], [14724], [84]]), :spam, "data/part3/3993spmsg77.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[6773], [97]], [[284], [4374], [80], [1850], [1847], [22299], [21472], [18957], [2176], [13522]  …  [20749], [1967], [16502], [22253], [9561], [14338], [16502], [17374], [6773], [16098]]), :legal, "data/part4/41008legit5.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19054], [1847], [15527], [1613], [20382], [84], [13830]], [[1692], [14342], [21366], [2130], [12424], [16887], [21013], [131], [765], [16502]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :spam, "data/part4/41017spmsg73.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[8197], [15018]], [[14851], [80], [2176], [17753], [17345], [11292], [15018], [4216], [84], [13872]  …  [84], [13736], [70], [14848], [18079], [16511], [16158], [80], [14800], [84]]), :legal, "data/part4/41023legit23.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[10930], [16870], [16462], [4177], [21139], [22214], [80], [14800], [84]], [[16870], [13113], [16462], [82], [10930], [775], [21139], [22214], [14800], [84]  …  [21292], [7062], [22032], [10333], [2130], [17388], [19054], [7062], [16870], [20395]]), :spam, "data/part4/4104spmsg99.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17345], [4339], [23075], [13606], [2130], [8189], [17923]], [[16502], [9594], [8667], [1967], [118], [51], [17923], [51], [14403], [21522]  …  [6306], [118], [86], [86], [17212], [84], [2676], [84], [13830], [86]]), :spam, "data/part4/41061spmsg92.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}(Vector{Int64}[], [[1791], [84], [84], [84], [3546], [18034], [20908], [12238], [130], [15985]  …  [15981], [84], [16147], [17345], [20824], [11870], [14338], [130], [19206], [84]]), :spam, "data/part4/41063spmsg93.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [8], [171], [16811], [5361], [14338], [16502], [9594]], [[68], [93], [70], [15287], [17629], [80], [12118], [118], [14896], [2965]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part4/41074legit30.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[23681], [15700], [47]], [[1791], [16871], [47], [4339], [17345], [3546], [17054], [118], [21990], [709]  …  [84], [964], [2130], [59], [103], [84], [964], [86], [10423], [70]]), :spam, "data/part4/41091spmsg79.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[24385], [1571]], [[284], [1705], [1494], [80], [196], [1591], [15682], [1835], [22636], [2130]  …  [1613], [6306], [118], [86], [86], [17212], [84], [7386], [84], [13830]]), :legal, "data/part4/41093legit32.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20153], [11852]], [[284], [11850], [80], [16756], [14338], [130], [8236], [7875], [84], [196]  …  [125], [125], [125], [125], [125], [125], [125], [125], [79], [127]]), :legal, "data/part4/4110legit20.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [23681], [1901], [15700], [3931], [82], [18559]], [[1791], [17896], [118], [196], [1591], [2498], [15820], [1967], [16502], [16599]  …  [23326], [80], [5068], [5890], [13406], [180], [22180], [13961], [12421], [51]]), :spam, "data/part4/4931spmsg63.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[7901], [82], [3193], [82], [23681], [82], [14338], [82], [5502]], [[76], [76], [76], [76], [76], [76], [76], [76], [76], [76]  …  [1850], [10248], [118], [7901], [132], [6592], [84], [8866], [84], [1850]]), :legal, "data/part4/4939legit10.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[47], [3247], [15966], [23031], [20908], [16721], [1991], [16502], [20259], [47]], [[76], [76], [76], [76], [76], [76], [76], [51], [16856], [51]  …  [17215], [84], [3902], [95], [82], [95], [14179], [82], [82], [1928]]), :spam, "data/part4/4940spmsg96.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118]], [[8962], [17225], [84], [84], [84], [4625], [18859], [20408], [13520], [839]  …  [132], [21106], [84], [13830], [16147], [17345], [47], [20259], [8438], [7339]]), :spam, "data/part4/4947spmsg98.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [13532], [3788], [12084]], [[13532], [3788], [12084], [82], [82], [82], [82], [82], [82], [82]  …  [86], [23982], [118], [20070], [84], [23088], [132], [1061], [84], [13830]]), :legal, "data/part4/4954legit8.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[6597], [22509], [9277], [23743]], [[22299], [14766], [797], [80], [6176], [5559], [14104], [2176], [64], [1896]  …  [9277], [14497], [12424], [16502], [20195], [14497], [4053], [47], [16147], [242]]), :spam, "data/part4/4954spmsg78.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [11006], [10373]], [[16871], [13472], [16811], [9520], [20908], [20882], [709], [1550], [18957], [196]  …  [24441], [2101], [15820], [5454], [14328], [16165], [1967], [14986], [84], [13611]]), :legal, "data/part4/4989legit21.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2397], [118], [6306], [118], [86], [86], [17212], [84], [22298], [84], [1923], [86], [14935], [86], [5762], [84], [6204]], [[17345], [13472], [2397], [22299], [10474], [82], [1850], [14338], [6145], [300]  …  [13522], [1594], [15498], [1613], [118], [8506], [132], [23095], [84], [13830]]), :legal, "data/part4/4994legit2.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13520], [1812], [17345], [13472], [4000], [84], [84], [84], [22213], [196], [4712], [17345], [1544], [1835], [95], [2130], [97], [12145], [47]], [[19206], [1847], [4774], [2101], [17011], [15566], [1970], [19206], [2008], [1169]  …  [7634], [23279], [82], [8230], [14343], [84], [20067], [183], [55], [1684]]), :spam, "data/part4/4996spmsg74.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [14988], [14372], [1613], [347], [82], [4553], [23768], [1835], [10829], [82], [24589], [3346]], [[14988], [14372], [1835], [8973], [3346], [2348], [347], [82], [4553], [23768]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part4/4998legit18.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[15964], [20695], [62], [2096], [47], [1621], [16958], [84], [946]], [[11954], [3295], [14494], [17345], [84], [84], [84], [84], [14389], [131]  …  [69], [70], [9583], [20657], [2130], [118], [51], [1675], [7339], [51]]), :spam, "data/part5/51045spmsg79.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [24385], [1571]], [[284], [1705], [3263], [80], [16147], [17345], [20824], [11870], [14338], [130]  …  [1613], [6306], [118], [86], [86], [17212], [84], [7386], [84], [13830]]), :legal, "data/part5/51048legit27.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19364], [10510], [16891]], [[13611], [12694], [21399], [118], [127], [2101], [4009], [16502], [24577], [1967]  …  [84], [79], [21724], [82], [24323], [14111], [79], [21724], [82], [539]]), :legal, "data/part5/51054legit20.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20140]], [[284], [6818], [80], [2176], [22213], [1594], [12643], [13406], [2176], [4339]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :legal, "data/part5/51065legit18.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1192], [59], [6308], [6152], [19206], [15964], [2646], [23283], [84], [84], [84]], [[13383], [17345], [1692], [1847], [2759], [19054], [7520], [18052], [47], [18957]  …  [2008], [216], [82], [13898], [68], [13383], [19907], [4053], [70], [84]]), :spam, "data/part5/51074spmsg72.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [9771], [82], [205], [118], [6685], [171], [3317], [80], [23681], [14338], [1359]], [[8461], [20236], [10879], [1991], [22627], [3788], [6816], [23681], [14338], [1359]  …  [4602], [80], [10202], [80], [24747], [21043], [1613], [1102], [15416], [84]]), :legal, "data/part5/51080legit13.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[23607], [16282], [17345], [22854], [12637], [1850], [82], [12581]], [[15964], [22301], [1363], [16502], [23259], [20526], [15287], [1594], [1967], [19410]  …  [21051], [1991], [130], [17682], [2130], [6835], [22555], [47], [47], [47]]), :spam, "data/part5/51081spmsg82.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [13368], [18085], [16637], [82], [21475], [131]], [[13611], [12445], [21399], [118], [127], [196], [64], [209], [15691], [1593]  …  [1991], [16538], [15287], [798], [728], [118], [801], [118], [834], [12111]]), :legal, "data/part5/51088legit34.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[958], [130], [15985], [13730], [2152], [2832], [22299], [13520], [109], [20427], [47]], [[12436], [12492], [2832], [82], [1212], [2130], [9583], [47], [958], [130]  …  [84], [22299], [16502], [4412], [80], [17345], [13472], [15462], [12243], [84]]), :spam, "data/part5/51098spmsg78.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20140]], [[284], [6818], [80], [16982], [15543], [15479], [80], [15966], [5502], [1835]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [127]]), :legal, "data/part5/5111legit41.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[11250], [18111], [18812]], [[18812], [47], [47], [84], [84], [5444], [4987], [153], [18957], [16248]  …  [84], [16147], [17345], [14338], [130], [23619], [8538], [123], [15610], [24331]]), :spam, "data/part5/5961spmsg74.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[59], [850], [80], [7132], [82], [82], [1968], [4298], [22880], [82], [82], [1692], [14342], [12993], [1850], [1663], [19054], [19206], [47]], [[76], [76], [76], [76], [76], [76], [76], [76], [76], [76]  …  [16502], [19206], [14338], [130], [20588], [14517], [24477], [5496], [12548], [16737]]), :spam, "data/part5/5968spmsg98.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[180], [22436], [5897], [21754], [17533], [84], [82], [68], [20568], [70]], [[22232], [24059], [15120], [10870], [144], [4457], [2008], [10598], [11158], [3295]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [4456]]), :spam, "data/part5/596spmsg100.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14328], [16165], [1967], [130], [307], [15700], [47], [47], [47], [21990], [1812], [131], [131]], [[16871], [16893], [180], [16900], [2130], [118], [15786], [15667], [180], [797]  …  [10704], [80], [14343], [84], [12094], [14111], [118], [19997], [82], [18881]]), :spam, "data/part5/5978spmsg70.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14988], [118], [14988], [14372], [1835], [22627], [3788], [20507]], [[16502], [9110], [13406], [22627], [3788], [23435], [1613], [14339], [22301], [20083]  …  [4339], [16502], [22562], [2130], [22880], [1835], [16502], [847], [8336], [84]]), :legal, "data/part5/5980legit11.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[4053], [16327], [14245], [47], [47], [47], [124], [127], [84], [118], [13249], [51], [51], [84], [80]], [[16502], [4862], [11245], [1847], [118], [18957], [17345], [13522], [15700], [18855]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :spam, "data/part5/5985spmsg104.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16224], [82], [1736], [15729]], [[1791], [80], [196], [16893], [13606], [2130], [12993], [19054], [1991], [1609]  …  [14338], [16502], [22509], [2008], [22299], [13266], [84], [24097], [80], [10435]]), :spam, "data/part5/5995spmsg99.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[11779], [4739], [15700], [47], [47], [68], [21823], [70]], [[11779], [4739], [15700], [47], [47], [47], [22299], [2771], [709], [23540]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [1261]]), :spam, "data/part5/5997spmsg64.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}(Vector{Int64}[], [[10936], [180], [18567], [131], [21631], [1968], [15193], [84], [84], [84]  …  [13886], [15964], [16926], [18247], [118], [17212], [84], [13042], [84], [13830]]), :spam, "data/part5/5998spmsg97.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[3108], [16926], [5987], [84], [84], [84], [13520], [59], [839], [15845], [4925], [84]], [[11817], [13439], [22328], [8962], [15300], [8772], [21691], [47], [93], [80]  …  [84], [4602], [6089], [13472], [125], [23026], [1835], [16502], [13944], [84]]), :spam, "data/part5/599spmsg87.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[1692], [21366], [16502], [23266], [13406], [8485], [22155], [9617], [1967], [130], [9408], [131]], [[1812], [17345], [21366], [16502], [23266], [22155], [13406], [954], [9617], [1967]  …  [9568], [2170], [1613], [17184], [84], [12727], [132], [3002], [84], [13830]]), :spam, "data/part6/61000spmsg79.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[183], [79], [79], [2130], [21475], [86], [15294], [6031]], [[180], [7253], [12791], [118], [196], [64], [2155], [11239], [3720], [709]  …  [13406], [21259], [16643], [24165], [68], [1629], [9814], [70], [84], [10249]]), :legal, "data/part6/61020legit36.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17345], [4339], [2130], [16250], [19054]], [[196], [4625], [18034], [196], [694], [1594], [16502], [15820], [7138], [17345]  …  [130], [17682], [2130], [125], [775], [6835], [22555], [47], [47], [47]]), :spam, "data/part6/61027spmsg87.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [18877], [1550], [1991], [10470], [21215], [3661]], [[8962], [180], [1030], [22636], [2130], [13163], [709], [9520], [118], [196]  …  [16502], [23472], [18948], [18124], [47], [70], [84], [82], [82], [15012]]), :legal, "data/part6/61044legit16.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[22127], [64], [959]], [[23607], [19666], [2130], [16502], [21743], [80], [10669], [18948], [2130], [19902]  …  [19106], [7341], [22103], [23785], [118], [4841], [7341], [80], [9682], [4247]]), :legal, "data/part6/61049legit37.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17963], [2292], [21543], [17345], [2130], [180], [4053], [20606], [20433]], [[17963], [2292], [21543], [17345], [2130], [180], [4053], [20606], [20433], [17963]  …  [23096], [5688], [16296], [9338], [13406], [752], [80], [6176], [3274], [84]]), :spam, "data/part6/6104spmsg74.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16926], [6167], [1991], [3677], [664], [8918]], [[21117], [15966], [76], [14418], [118], [86], [86], [14418], [84], [1672]  …  [84], [1672], [84], [7423], [84], [14000], [86], [17157], [86], [16410]]), :legal, "data/part6/61054legit15.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[24485], [14338], [12905], [82], [8091]], [[21735], [14338], [22627], [3788], [8584], [24485], [14338], [12905], [17597], [12111]  …  [6816], [80], [19682], [80], [3256], [13547], [22407], [80], [24411], [356]]), :legal, "data/part6/61055legit57.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1325], [4607], [4480], [1967], [22225], [16436], [17372], [47], [47], [47]], [[23140], [80], [16502], [24427], [23540], [2130], [24109], [4607], [14338], [17345]  …  [13448], [19206], [80], [20967], [3126], [1967], [2820], [6478], [84], [70]]), :spam, "data/part6/61060spmsg86.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[205], [132], [132], [204], [80], [2176], [4339], [13383], [130], [2866], [124], [2759], [23590], [47], [47]], [[6308], [80], [6176], [190], [82], [9568], [22328], [14338], [13520], [59]  …  [76], [76], [76], [16147], [17345], [80], [7830], [8438], [14800], [84]]), :spam, "data/part6/61062spmsg69.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [123], [8305], [14338], [10244], [1804], [84], [84], [84], [14338], [10745], [4177], [2843], [1835], [10372]], [[17207], [84], [84], [84], [84], [2176], [15083], [13383], [10859], [1967]  …  [118], [6306], [118], [86], [86], [17212], [84], [2281], [84], [13830]]), :spam, "data/part6/6863spmsg88.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[10879], [1835], [24503], [11260], [21691]], [[16502], [16926], [12808], [68], [6306], [118], [86], [86], [17212], [84]  …  [84], [1684], [84], [1570], [84], [2146], [86], [253], [1827], [86]]), :legal, "data/part6/6880legit6.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[18397], [14338], [16502], [13747]], [[15149], [4177], [9876], [5853], [80], [180], [4968], [3735], [1835], [4739]  …  [84], [13383], [18957], [8953], [1847], [16993], [130], [7874], [1847], [84]]), :legal, "data/part6/6921legit55.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1672], [84], [1653], [86], [5062], [21717], [68], [17367], [70]], [[76], [76], [76], [17367], [19054], [7634], [14338], [6475], [14210], [76]  …  [84], [95], [84], [107], [123], [196], [84], [95], [84], [109]]), :legal, "data/part6/6934legit44.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[5652], [13547], [5228], [1613], [10898], [51], [1465], [51]], [[284], [16360], [80], [23607], [3247], [17618], [1970], [7847], [1685], [22299]  …  [16248], [24717], [794], [242], [84], [214], [84], [80], [11793], [84]]), :legal, "data/part6/6942legit50.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19071]], [[650], [1607], [19635], [82], [82], [82], [82], [2645], [130], [16248]  …  [130], [24076], [84], [14338], [593], [80], [23681], [8564], [82], [14788]]), :spam, "data/part6/6956spmsg98.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [14799], [15527], [23526], [47]], [[1791], [14851], [4862], [2130], [4578], [4177], [17345], [84], [5800], [130]  …  [1850], [709], [11449], [2130], [4578], [4177], [15779], [17146], [84], [1860]]), :legal, "data/part6/6989legit58.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[6592]], [[284], [14851], [80], [196], [1591], [20824], [14799], [2130], [4339], [10350]  …  [14078], [17212], [84], [20754], [84], [13830], [86], [1587], [86], [6506]]), :spam, "data/part6/6992spmsg84.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[51], [20917], [51], [20203]], [[1791], [47], [2176], [16214], [16502], [7634], [20908], [16502], [9459], [101]  …  [23121], [23282], [13079], [1991], [20749], [1967], [16502], [8973], [4453], [24743]]), :legal, "data/part6/6993legit17.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [14988], [13757], [1613], [16502], [20199], [22301], [12323], [14338], [22628]], [[14988], [2410], [97], [22301], [5228], [1835], [10829], [3788], [19144], [1613]  …  [80], [3394], [132], [1582], [84], [1219], [84], [1570], [84], [1613]]), :legal, "data/part6/6999legit31.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[5888]], [[4053], [22009], [20048], [1991], [24717], [9084], [16926], [24717], [118], [6306]  …  [86], [17212], [84], [20466], [84], [13830], [86], [20048], [84], [14758]]), :spam, "data/part7/71002spmsg102.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[34], [4739], [678], [47]], [[17008], [14766], [13448], [4682], [17345], [21366], [1835], [9185], [18948], [1593]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :spam, "data/part7/71005spmsg98.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [664]], [[14851], [5171], [8519], [118], [127], [127], [284], [16360], [86], [12671]  …  [13522], [2176], [22880], [17116], [84], [24339], [569], [2179], [3295], [13547]]), :legal, "data/part7/71011legit38.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[12359], [64], [962]], [[1791], [84], [196], [64], [209], [180], [10978], [14338], [16502], [3735]  …  [186], [1991], [130], [2346], [123], [82], [70], [14019], [80], [15031]]), :legal, "data/part7/71018legit32.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[21292], [856], [17073], [17157], [14338], [59], [964]], [[856], [17073], [21292], [22328], [14338], [13520], [59], [964], [17345], [21366]  …  [4602], [20259], [18111], [9306], [84], [152], [12116], [13383], [2349], [19915]]), :spam, "data/part7/71019spmsg83.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[12095], [14988]], [[82], [82], [82], [82], [82], [82], [82], [19584], [1967], [8323]  …  [1967], [8323], [7634], [82], [82], [82], [82], [82], [82], [82]]), :legal, "data/part7/71020legit50.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[24485], [14338], [12905], [82], [8091]], [[21735], [14338], [22627], [3788], [8584], [24485], [14338], [12905], [11751], [12111]  …  [13522], [1594], [2484], [22299], [1835], [180], [3788], [4382], [1489], [84]]), :legal, "data/part7/71043legit52.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1692], [14342], [10551], [16887], [47]], [[11913], [47], [17658], [47], [10769], [13520], [47], [17658], [47], [10769]  …  [1967], [20048], [9568], [47], [167], [183], [171], [152], [18573], [12116]]), :spam, "data/part7/71046spmsg87.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [12377], [1991], [22627], [3788], [20264]], [[284], [1705], [84], [5171], [80], [1968], [12547], [80], [19054], [1847]  …  [16474], [14338], [16502], [7253], [3420], [84], [127], [127], [14851], [5171]]), :legal, "data/part7/71050legit29.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19054], [1847], [15527], [1991], [951], [84], [113], [24156], [1748]], [[2130], [3986], [4177], [16887], [21013], [1785], [2130], [6306], [118], [86]  …  [175], [175], [175], [175], [175], [175], [175], [175], [175], [175]]), :spam, "data/part7/71064spmsg61.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[130], [5527], [84], [13830], [3868], [5719]], [[16147], [17345], [14338], [17773], [2130], [3868], [80], [15964], [6109], [4586]  …  [82], [82], [82], [82], [82], [82], [82], [82], [82], [82]]), :legal, "data/part7/7899legit17.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [23607], [15382], [2130], [14988], [9736], [1991], [24385], [47]], [[16502], [5228], [1074], [8424], [13472], [9373], [1613], [10577], [6017], [1835]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part7/7903legit14.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [20600], [2384], [18656]], [[1791], [9762], [80], [127], [16502], [4108], [3585], [20541], [13406], [20547]  …  [24724], [22274], [1967], [16502], [5283], [7936], [84], [16756], [80], [6709]]), :legal, "data/part7/7944legit56.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[17374], [10879], [1991], [10829], [24589], [21669], [1613], [13190], [80], [19398]], [[16474], [82], [82], [1593], [2810], [181], [6820], [6866], [16502], [8772]  …  [22301], [86], [8368], [86], [9760], [86], [3296], [86], [19842], [86]]), :legal, "data/part7/7955legit11.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[4874], [2660], [80], [5762], [2535]], [[19054], [1847], [180], [13306], [13757], [14338], [24157], [13520], [84], [68]  …  [15016], [15283], [84], [13757], [21840], [21532], [4891], [1663], [15093], [84]]), :spam, "data/part7/7962spmsg92.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [130], [4053], [16926], [18247]], [[19054], [1847], [180], [51], [23660], [7634], [51], [17345], [21841], [7983]  …  [118], [125], [754], [125], [125], [775], [82], [82], [125], [775]]), :spam, "data/part7/7975spmsg65.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13886], [2170], [1835], [16502], [12709]], [[59], [118], [88], [178], [88], [118], [59], [241], [80], [932]  …  [5326], [10236], [21798], [13472], [12836], [3187], [2130], [16502], [5326], [84]]), :spam, "data/part7/7976spmsg67.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[10299], [23301], [59], [59], [59], [59], [59]], [[196], [4625], [18034], [196], [694], [1594], [16502], [15820], [7138], [17345]  …  [130], [17682], [2130], [125], [775], [6835], [22555], [47], [47], [47]]), :spam, "data/part7/7977spmsg76.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[575], [16993], [131], [47], [131], [82], [14194]], [[6306], [118], [86], [86], [17212], [84], [17471], [84], [13830], [16502]  …  [2021], [14328], [17345], [4053], [97], [13747], [2845], [14221], [15700], [47]]), :spam, "data/part7/7981spmsg108.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13249], [84], [10712], [3295], [8667]], [[19054], [7634], [13141], [22299], [16502], [7913], [847], [22042], [18215], [14222]  …  [84], [17203], [84], [13830], [86], [18667], [86], [6916], [84], [14758]]), :spam, "data/part7/7995spmsg71.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [3613], [11245]], [[11245], [1991], [16502], [1143], [13034], [84], [16502], [10333], [1967], [180]  …  [12993], [1850], [1991], [2130], [18124], [84], [16756], [80], [17825], [84]]), :legal, "data/part8/8101legit52.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[180], [16248], [7634], [84], [84], [84], [84], [84]], [[2176], [19795], [1593], [1571], [1835], [15820], [10712], [23479], [1967], [16502]  …  [86], [86], [86], [86], [86], [86], [125], [86], [86], [86]]), :spam, "data/part8/8103spmsg64.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [2067], [16502], [2023], [79], [17212], [18951]], [[284], [14851], [80], [127], [11419], [13406], [14913], [80], [2130], [1280]  …  [22213], [1850], [15691], [1594], [1018], [131], [23266], [24097], [80], [11419]]), :legal, "data/part8/81049legit34.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[125], [125], [125], [125], [125], [125], [125], [15820], [20824], [6597], [9277], [13757], [125], [125], [125], [125], [125], [125], [125]], [[765], [4784], [2130], [14328], [6592], [1991], [180], [20824], [6597], [9277]  …  [18247], [1812], [17345], [21366], [130], [10607], [408], [4177], [15981], [171]]), :spam, "data/part8/81053spmsg93.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[18122], [13406], [10373]], [[284], [68], [10510], [70], [2590], [80], [196], [4339], [16811], [1550]  …  [4177], [16502], [11317], [24532], [17877], [1991], [19054], [6227], [84], [17585]]), :legal, "data/part8/81055legit0.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[526], [16250], [16502], [17119], [47]], [[180], [9617], [8962], [14338], [17345], [47], [2130], [16502], [11317], [16651]  …  [132], [8731], [86], [13240], [86], [24559], [86], [11846], [84], [6204]]), :spam, "data/part8/81058spmsg77.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [190], [82], [14988], [171], [14988], [2410], [1835], [20255], [21767], [14975]], [[16474], [14338], [8689], [18988], [14988], [2410], [1835], [20255], [21767], [14975]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part8/81086legit13.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[13872], [18957], [22880], [14338], [17345], [131], [82], [13571]], [[19071], [16756], [14338], [24324], [1663], [47], [47], [2176], [4339], [8848]  …  [14338], [13383], [130], [3295], [1835], [16502], [12995], [47], [16502], [15579]]), :spam, "data/part8/81087spmsg88.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [13448], [11245], [131]], [[284], [4726], [13406], [14851], [80], [4712], [47], [2176], [13472], [14855]  …  [4726], [80], [1609], [16502], [2199], [10239], [131], [23266], [24097], [14913]]), :legal, "data/part8/81094legit8.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[23266], [8175], [51], [12314], [51], [23140], [22358], [24589], [11752], [1692]  …  [21366], [17345], [2130], [9131], [1847], [18957], [180], [21781], [9494], [80]], [[19591], [1967], [16502], [13508], [24589], [80], [1636], [14342], [4339], [2130]  …  [12111], [24589], [17264], [80], [14800], [84], [13383], [2349], [17215], [84]]), :spam, "data/part8/8114spmsg65.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[8962], [1835], [19206], [47], [47], [10299], [4774], [14338], [16062]], [[17345], [13522], [1192], [59], [839], [80], [6176], [2008], [11279], [1835]  …  [21051], [1991], [130], [17682], [2130], [6835], [22555], [47], [47], [47]]), :spam, "data/part8/8921spmsg96.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [171]], [[3819], [23681], [14338], [1359], [2559], [64], [964], [22313], [10879], [1991]  …  [253], [253], [253], [253], [253], [253], [253], [253], [253], [253]]), :legal, "data/part8/8923legit56.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[21990], [1847], [17345], [21282], [131]], [[21282], [82], [4683], [10090], [23222], [21282], [19129], [17345], [2130], [21230]  …  [2101], [17345], [13522], [16733], [1850], [20408], [17345], [13785], [1850], [84]]), :spam, "data/part8/8927spmsg80.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [11457], [118], [16317], [20215], [68], [11521], [47], [47], [47], [70]], [[284], [4726], [13406], [20146], [10741], [1847], [3249], [1046], [18957], [2176]  …  [14686], [2130], [526], [2130], [130], [4797], [131], [23266], [24097], [14913]]), :legal, "data/part8/8947legit48.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[24665], [20526]], [[23607], [11397], [16502], [4412], [1967], [19054], [11665], [20824], [13295], [80]  …  [180], [951], [61], [3126], [1613], [19054], [9211], [47], [47], [47]]), :spam, "data/part8/8948spmsg104.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[528], [22063], [82], [21703], [8322], [82], [3186], [82], [68], [2278], [70]], [[16147], [17345], [14338], [130], [19410], [1835], [15964], [17820], [2601], [47]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [3554]]), :spam, "data/part8/8948spmsg89.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [7940], [167], [190], [82], [14988], [171]], [[127], [284], [8501], [80], [127], [127], [1991], [20749], [1967], [1705]  …  [20215], [80], [12080], [1835], [8895], [84], [24097], [80], [10006], [8501]]), :legal, "data/part8/8951legit6.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}(Vector{Int64}[], [[16502], [12848], [16158], [14574], [1991], [20255], [21767], [16740], [11935], [22213]  …  [503], [84], [1659], [14946], [132], [12956], [84], [4393], [84], [13830]]), :legal, "data/part8/8958legit23.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [14444], [118], [11717], [2130], [22554], [14935], [10879], [171]], [[249], [249], [249], [22554], [196], [84], [228], [84], [229], [10879]  …  [14686], [131], [22299], [22145], [131], [1835], [12635], [7033], [5257], [70]]), :legal, "data/part8/8979legit3.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[8959]], [[19054], [7634], [1847], [8049], [17753], [2130], [17345], [1835], [11135], [22299]  …  [8074], [80], [2001], [80], [1443], [6037], [118], [19166], [82], [15099]]), :spam, "data/part8/89spmsg78.txt")])
  Dataset{Vector{Int64}}(Event{Vector{Int64}}[Event{Vector{Int64}}(Message{Vector{Int64}}([[2750], [64], [964], [13651], [82], [3735], [24183]], [[13207], [64], [964], [3735], [24183], [23681], [14338], [1359], [15671], [4318]  …  [14574], [1991], [8890], [783], [82], [82], [792], [80], [12118], [84]]), :legal, "data/part9/91024legit9.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[167], [8], [171], [118], [21735], [229], [84], [180], [84], [205]  …  [1845], [82], [7967], [15631], [68], [7775], [13406], [8772], [23681], [70]], [[21735], [229], [84], [180], [84], [205], [84], [118], [7775], [13406]  …  [80], [7083], [3816], [80], [4553], [3788], [118], [4453], [2008], [8949]]), :legal, "data/part9/91037legit5.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[353], [1991], [24206], [13406], [10510], [15740], [20131]], [[1970], [7604], [2004], [84], [187], [84], [353], [80], [10510], [15740]  …  [2591], [80], [13406], [2130], [9646], [11538], [21842], [84], [19955], [291]]), :legal, "data/part9/91057legit0.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[5602], [10271], [23888], [11852], [118], [5786]], [[284], [13383], [80], [16933], [6797], [4177], [5786], [13109], [12318], [4436]  …  [76], [76], [76], [76], [76], [76], [76], [76], [76], [76]]), :legal, "data/part9/91060legit11.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[15265], [13406], [5331]], [[1791], [5629], [80], [14851], [17185], [18957], [18877], [5257], [22521], [36]  …  [13472], [6626], [84], [14799], [15527], [23526], [84], [24097], [80], [3720]]), :legal, "data/part9/9106legit25.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[84], [84], [84], [84], [84], [16868], [19216], [2130], [9583], [4774], [47]], [[1791], [84], [1970], [10565], [1847], [8763], [84], [196], [1591], [180]  …  [1609], [19264], [1609], [905], [4862], [4348], [13406], [12264], [5639], [84]]), :spam, "data/part9/91089spmsg107.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[19011], [13522], [3540], [19833], [130], [1187], [47]], [[13472], [17345], [8049], [3067], [131], [14403], [130], [16248], [13406], [12361]  …  [152], [12116], [18573], [80], [14800], [84], [13383], [2349], [17215], [84]]), :spam, "data/part9/91098spmsg108.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[16502], [9551], [4053], [17348], [1625], [47], [47]], [[19054], [1847], [180], [23338], [7634], [1835], [10464], [18969], [84], [82]  …  [47], [82], [82], [20347], [175], [2746], [175], [5950], [82], [82]]), :spam, "data/part9/9116spmsg79.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[9583], [6125], [12091], [47]], [[9583], [6125], [12091], [1968], [3296], [80], [1968], [2646], [13984], [80]  …  [47], [47], [9617], [22032], [17345], [23681], [118], [70], [16147], [17345]]), :spam, "data/part9/911spmsg85.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [5947], [600], [84], [16384], [84], [1819], [82], [127]  …  [1819], [68], [1672], [84], [1653], [86], [5063], [80], [13090], [70]], [[2130], [9284], [10973], [13406], [21799], [80], [16868], [6306], [118], [86]  …  [6485], [22336], [10936], [15691], [1594], [8982], [2130], [5803], [1612], [84]]), :legal, "data/part9/9126legit12.txt")  …  Event{Vector{Int64}}(Message{Vector{Int64}}([[1953], [11935], [118], [14574], [13406], [23681], [14338], [1359]], [[16502], [22627], [3788], [5977], [12084], [23435], [80], [12982], [1967], [16502]  …  [82], [82], [82], [82], [82], [82], [82], [82], [82], [82]]), :legal, "data/part9/9952legit42.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[1609], [17345], [11711], [82], [82], [4053], [782], [13406], [8625]], [[4053], [782], [13406], [8625], [23681], [19907], [4053], [23360], [82], [21184]  …  [8907], [84], [13830], [22299], [19969], [1835], [16502], [9804], [9505], [84]]), :spam, "data/part9/9953spmsg65.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[20153], [16737], [118], [68], [1968], [9804], [70]], [[82], [82], [127], [127], [127], [127], [3986], [15947], [14851], [132]  …  [84], [1684], [84], [1570], [84], [2146], [127], [127], [127], [127]]), :legal, "data/part9/9954legit31.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[21735], [20048]], [[24339], [196], [64], [2155], [4849], [18085], [16502], [17186], [20048], [80]  …  [2038], [3227], [1991], [16502], [17212], [1812], [1850], [19129], [84], [19320]]), :legal, "data/part9/9956legit60.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[15382], [1835], [15631]], [[16502], [3666], [10677], [650], [14651], [1967], [3885], [13406], [8584], [21856]  …  [193], [84], [15820], [2008], [16811], [11931], [22301], [1359], [70], [84]]), :legal, "data/part9/9972legit55.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [11457], [17524], [15836], [68], [11521], [47], [47], [47], [47], [47], [47], [47], [47], [47], [47], [70]], [[16733], [19054], [118], [6306], [118], [86], [86], [17212], [84], [1672]  …  [1956], [84], [2033], [84], [1618], [86], [22301], [86], [7428], [86]]), :legal, "data/part9/9975legit14.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[4053], [4074], [4532]], [[10179], [1968], [15193], [1812], [17345], [21366], [16502], [17154], [4074], [14338]  …  [84], [2130], [1594], [408], [20966], [1835], [16502], [9804], [118], [19969]]), :spam, "data/part9/9979spmsg74.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[2056], [118], [21215], [1662], [1835], [10470]], [[284], [13383], [80], [127], [24731], [2328], [2130], [130], [21196], [84]  …  [6866], [51], [342], [51], [21215], [1662], [84], [82], [82], [15012]]), :legal, "data/part9/9990legit50.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[20787]], [[183], [180], [205], [205], [191], [214], [227], [219], [180], [219]  …  [84], [14735], [84], [1465], [84], [1792], [86], [253], [20787], [86]]), :legal, "data/part9/9994legit44.txt"), Event{Vector{Int64}}(Message{Vector{Int64}}([[14444], [118]], [[23422], [22913], [5987], [13520], [59], [819], [84], [951], [15845], [4925]  …  [13406], [15319], [130], [21292], [10607], [1812], [19864], [84], [16147], [17345]]), :spam, "data/part9/9996spmsg86.txt")])
,#+END_EXAMPLE
#+end_example


* Plots

** \lambda_legit
#+begin_src jupyter-julia :results raw drawer
λ_legits = map(exp, range(log(1.), log(1.e9), length=20)) |> collect

function pred(λ_legit)
    return cross_validation(ds; score=accuracy) do X_train, y_train, X_test
        X_train_subj, X_train_body = prep_train_dataset(X_train)
        X_test_subj, X_test_body = prep_test_dataset(X_test)
        clf_subj = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
        clf_body = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
        fit(clf_subj, X_train_subj)
        fit(clf_body, X_train_body)
        pred = (x_subj, x_body) -> argmax(sum_dicts(predictw(clf_body, x_body), predictw(clf_subj, x_subj); ratio = ratio))
        return collect(map(pred, X_test_subj, X_test_body))
    end
end

plot(map(log, λ_legits) |> collect, map(pred, λ_legits) |> collect, label="", ylabel="Accuracy", xlabel="ln λ")
#+end_src

#+RESULTS:
:results:
# Out[13]:
[[file:./obipy-resources/9762vQ.svg]]
:end:



** ROC
#+begin_src jupyter-julia :results raw drawer
fp, tp = get_roc_data(ds, :spam; L=eps(), H=1, TICKS=1000, LOG=true) do X_train, y_train, X_test
    X_train_subj, X_train_body = prep_train_dataset(X_train)
    X_test_subj, X_test_body = prep_test_dataset(X_test)
    clf_subj = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
    clf_body = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
    fit(clf_subj, X_train_subj)
    fit(clf_body, X_train_body)
    pred = (x_subj, x_body) -> convert_to_prob(sum_dicts(predictw(clf_body, x_body), predictw(clf_subj, x_subj); ratio = ratio))

    return collect(map(pred, X_test_subj, X_test_body))
end

plot(tp, fp, label="", xlabel="True Postitive Rate", ylabel="False Positive Rate")
#+end_src

#+RESULTS:
:results:
# Out[93]:
[[file:./obipy-resources/TX7IYF.svg]]
:end:

#+begin_src jupyter-julia :results raw drawer
fp, tp = get_roc_data(ds, :spam; TICKS=100) do X_train, y_train, X_test
    X_train_subj, X_train_body = prep_train_dataset(X_train)
    X_test_subj, X_test_body = prep_test_dataset(X_test)
    clf_subj = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
    clf_body = mk_bayes_clf(NGrammWord, α, Dict(:legal => λ_legit, :spam => 1.0))
    fit(clf_subj, X_train_subj)
    fit(clf_body, X_train_body)
    pred = (x_subj, x_body) -> norm_res(sum_dicts(predictw(clf_body, x_body), predictw(clf_subj, x_subj); ratio = ratio))

    return collect(map(pred, X_test_subj, X_test_body))
end

plot(tp, fp, label="", xlabel="True Postitive Rate", ylabel="False Positive Rate")
#+end_src

#+RESULTS:
:results:
# Out[105]:
[[file:./obipy-resources/V1Sajo.svg]]
:end:
